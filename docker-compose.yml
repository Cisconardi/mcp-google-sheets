version: "3.9"

services:
  mcp-google-sheets:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: mcp-google-sheets
    restart: unless-stopped
    ports:
      - "8000:8000"

    environment:
      # Percorso alle credenziali (montato nel container)
      SERVICE_ACCOUNT_PATH: /app/credentials/service-account.json

      # ID della cartella Google Drive da usare
      DRIVE_FOLDER_ID: ${DRIVE_FOLDER_ID:-}

      # Se vuoi usare una variabile base64 per le credenziali invece del file:
      # CREDENTIALS_CONFIG: ${CREDENTIALS_CONFIG:-}

      # Config aggiuntiva (se supportata dalla repo)
      LOG_LEVEL: "info"

    volumes:
      # Monta localmente o da Coolify il file JSON delle credenziali
      - ./credentials:/app/credentials:ro

    command: >
      uvicorn mcp_google_sheets.main:app
      --host 0.0.0.0
      --port 8000
